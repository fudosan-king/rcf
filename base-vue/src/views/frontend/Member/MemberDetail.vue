<template>
    <div>
        <div class="main-content bg-green-15">
            <section>
                <div class="container">
                    <div class="title-sub">
                        <h1>電子交付書類</h1>
                    </div>
                    <div class="member member-detail bg-white">

                        <div class="box">   
                            <div class="news">
                                <a href="#companyNews" data-collapse="true" data-action="close" role="button">出資者関連書面<i class="fas fa-minus-circle"></i></a>
                                <div class="collapse" id="companyNews">
                                    <div class="block">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th style="width:52%">書類名</th>
                                                    <th>ご確認日</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>反社会的勢力に該当しないことの表明・確約に関する同意事項</td>
                                                    <td>2021/09/30</td>
                                                </tr>
                                                <tr>
                                                    <td>個人情報の取り扱いに関する同意事項</td>
                                                    <td>2021/09/30</td>
                                                </tr>
                                                <tr>
                                                    <td>電磁的方法による書面の交付に関する同意事項</td>
                                                    <td>2021/09/30</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="box">
                            <div class="report">
                                <a href="#financialReport" data-collapse="true" data-action="close" role="button">決算報告書<i class="fas fa-minus-circle"></i></a>
                                <div class="collapse" id="financialReport">
                                    <div class="block">
                                        <ul>
                                            <li>
                                                <div class="info">
                                                    <p>決算報告書（第10期）</p>
                                                    <button type="button" class="btn btn-pdf">閲覧</button>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="info">
                                                    <p>決算報告書（第9期）</p>
                                                    <button type="button" class="btn btn-pdf">閲覧</button>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="info">
                                                    <p>決算報告書（第8期）</p>
                                                    <button type="button" class="btn btn-pdf">閲覧</button>
                                                </div>
                                            </li>
                                        </ul>
                                   </div>
                                </div>
                            </div>
                        </div>

                        <div class="box">
                            <div class="report">
                                <a href="#annualReport" data-collapse="true" data-action="close" role="button">年間取引報告書<i class="fas fa-minus-circle"></i></a>
                                <div class="collapse" id="annualReport">
                                    <div class="block">
                                        <ul>
                                            <li>
                                                <div class="info">
                                                    <p>2020年間取引報告書</p>
                                                    <button type="button" class="btn btn-pdf">閲覧</button>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="info">
                                                    <p>2019年年間取引報告書</p>
                                                    <button type="button" class="btn btn-pdf">閲覧</button>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="info">
                                                    <p>2018年年間取引報告書</p>
                                                    <button type="button" class="btn btn-pdf">閲覧</button>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="box">
                            <div class="document">
                                <a href="#document" data-collapse="true" data-action="close" role="button">取引別書面<i class="fas fa-minus-circle"></i></a>
                                <div class="collapse" id="document">
                                    <div class="block">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>取引物件名</th>
                                                    <th>書類名</th>
                                                    <th>ご確認日</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="name">リマワル一号 </div>
                                                    </td>
                                                    <td>
                                                        <div class="download">
                                                            <a href="#">重要事項説明書</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="date">
                                                            2021/09/30
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="name">リマワル一号 </div>
                                                    </td>
                                                    <td>
                                                        <div class="download">
                                                            <a href="#">契約成立前書面</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="date">
                                                            2021/09/30
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="name">リマワル一号 </div>
                                                    </td>
                                                    <td>
                                                        <div class="download">
                                                            <a href="#">契約成立時書面</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="date">
                                                            2021/09/30
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="name">リマワル一号 </div>
                                                    </td>
                                                    <td>
                                                        <div class="download">
                                                            <a href="#">重要事項説明書</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="date">
                                                            2021/09/30
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="name">リマワル一号 </div>
                                                    </td>
                                                    <td>
                                                        <div class="download">
                                                            <a href="#">契約成立前書面</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="date">
                                                            2021/10/30
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="name">リマワル一号 </div>
                                                    </td>
                                                    <td>
                                                        <div class="download">
                                                            <a href="#">契約成立時書面</a>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="date">
                                                            2021/10/30
                                                        </div>
                                                    </td>
                                                </tr>
                               
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>
        </div>
    </div>
</template>

<script>

export default {
    created() {
        this.$nextTick(() => {
            this.init(); 
        });
    },
    methods: {
            
        init() {
            this._Collapse();
        },

        _Collapse(){
            const collapses = document.querySelectorAll('a[data-collapse=true]');
            if(collapses.length > 0 ){
                collapses.forEach( (ele)=>{
                    //Load
                    let action = ele.getAttribute('data-action');
                    let divCollapse = ele.nextSibling;
                    if( action === 'close' ){
                        ele.querySelector('i').classList.remove('fa-minus-circle');
                        ele.querySelector('i').classList.add('fa-plus-circle');
                    } else {
                        ele.querySelector('i').classList.add('fa-minus-circle');
                        ele.querySelector('i').classList.remove('fa-plus-circle');
                        divCollapse.classList.add('show');
                    }

                    //Click
                    ele.addEventListener('click',(e)=>{
                        e.preventDefault();
                        const currentTarget = e.currentTarget;
                        action = currentTarget.getAttribute('data-action');
                        const collapseId = currentTarget.getAttribute('href');
                        divCollapse = document.getElementById(collapseId.replace('#',''));
                        if( action === 'close' ){
                            currentTarget.setAttribute('data-action','open');
                            currentTarget.querySelector('svg[data-icon]').setAttribute('data-icon', 'minus-circle');
                            divCollapse.classList.add('show');
                            const height = divCollapse.offsetHeight;
                            divCollapse.classList.add('collapsing');
                            setTimeout(()=>{
                                divCollapse.style.height = height+'px';
                            },10)
                        } else {
                            currentTarget.setAttribute('data-action','close');
                            currentTarget.querySelector('svg[data-icon]').setAttribute('data-icon', 'plus-circle');
                            divCollapse.removeAttribute('style');
                            setTimeout(()=>{
                                divCollapse.classList.remove('collapsing');
                                divCollapse.classList.remove('show');
                            },400)
                        }
                    });

                });
            }
        }

    }
}

</script>

<style lang="scss" scoped>



</style>